<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>hydropaper: an overview • hydropaper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="hydropaper: an overview">
<meta property="og:description" content="hydropaper">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydropaper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/overview.html">hydropaper: an overview</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/arsilva87/hydropaper/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="overview_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>hydropaper: an overview</h1>
                        <h4 class="author">Anderson Rodrigo da Silva, Wilhan Valsco dos Santos</h4>
            
            <h4 class="date">2022-02-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/arsilva87/hydropaper/blob/master/vignettes/overview.Rmd"><code>vignettes/overview.Rmd</code></a></small>
      <div class="hidden name"><code>overview.Rmd</code></div>

    </div>

    
    
<p>This is an introduction on how to use the package <em>hydropaper</em>. It is important that you have first read some <a href="https://arsilva87.github.io/hydropaper/">basic instructions</a> on how to capture images of water-sensitive papers, specially when they are taken from the crop field.</p>
<p>The functions rely on the image-handling functions of the package <a href="https://doi.org/doi:10.18129/B9.bioc.EBImage"><em>EBImage</em></a> (Pau et al., 2010), so that images can be read and manipulated using its implementations such as <code><a href="https://rdrr.io/pkg/EBImage/man/io.html">readImage()</a></code>, <code><a href="https://rdrr.io/pkg/EBImage/man/spatial.html">resize()</a></code> and <code><a href="https://rdrr.io/pkg/EBImage/man/spatial.html">rotate()</a></code>.</p>
<p>To get started, load the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/arsilva87/hydropaper">hydropaper</a></span><span class="op">)</span></code></pre></div>
<div id="detecting-a-paper" class="section level2">
<h2 class="hasAnchor">
<a href="#detecting-a-paper" class="anchor"></a>Detecting a paper</h2>
<p><em>hydropaper</em> is loaded with a pre-trained detector of water-sensitive papers, based on SURF (Speeded Up Robust Features) descriptor. It will search for points in the image being analyzed that are similar to that detector. Then, a red rectangle (horizontal or vertical) likely to wrap the paper is drawn on the image.</p>
<p>Both an image (class <code>Image</code>) or the path (a <code>character</code>) to an image file (.jpg, .png, .tif) are accepted as argument.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'images'</span>, <span class="st">'field1.jpg'</span>, package <span class="op">=</span> <span class="st">'hydropaper'</span><span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detectPaper.html">detectPaper</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Now the object <code>p1</code> is an image that contains an attribute with the bounding box of the paper in the original image.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">p1</span>, <span class="st">'paper_bbox'</span><span class="op">)</span>
<span class="co">#&gt;     xmin     ymin     xmax     ymax </span>
<span class="co">#&gt; 170.7656 186.1319 900.3028 455.6520</span></code></pre></div>
</div>
<div id="analyzing-a-paper" class="section level2">
<h2 class="hasAnchor">
<a href="#analyzing-a-paper" class="anchor"></a>Analyzing a paper</h2>
<p>Estimating spray parameters such as density of drops per squared centimeters, volumetric median diameter (VMD) of droplets and planty of others is easy. Once you have an image of the paper alone, i.e., either as a result of <code><a href="../reference/detectPaper.html">detectPaper()</a></code> or one that was manually clipped using <code><a href="../reference/clipPaper.html">clipPaper()</a></code> or even just an image file, point it out to <code><a href="../reference/analyzePaper.html">analyzePaper()</a></code>. Notice that the argument <code>paper_dim</code> (in mm) must be passed in order to correctly estimate the parameters. The argument <code>distance</code> (in m) will be used to estimate the drift using the ‘German model’ for field crops (Rautmann et al., 2001). Finally, <code>display.it = TRUE</code> will show the image of the paper with the detected droplets highlighted in cyan.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/analyzePaper.html">analyzePaper</a></span><span class="op">(</span><span class="va">p1</span>, 
                   paper_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">76</span>, <span class="fl">26</span><span class="op">)</span>, 
                   distance <span class="op">=</span> <span class="fl">0.7</span>, 
                   display.it <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a1</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;               Water-Sensitive Paper Analysis</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;                             N drops: 1394 </span>
<span class="co">#&gt;                  Spray coverage (%): 18.1 </span>
<span class="co">#&gt;                 Density (drops/cm2): 71 </span>
<span class="co">#&gt;          Vol. applied (microliters): 356.96 </span>
<span class="co">#&gt;                    L/ha (predicted): 1806.49 </span>
<span class="co">#&gt;        Mean diameter (micronmeters): 397 </span>
<span class="co">#&gt;                   NMD (micrometers): 273 </span>
<span class="co">#&gt;                   VMD (micrometers): 639 </span>
<span class="co">#&gt;                   D.1 (micrometers): 299 </span>
<span class="co">#&gt;                   D.9 (micrometers): 965 </span>
<span class="co">#&gt;                  Relative amplitude: 1.04 </span>
<span class="co">#&gt;          Largest drop (micrometers): 1549 </span>
<span class="co">#&gt;         Smallest drop (micrometers): 100 </span>
<span class="co">#&gt; Diam. class % (&lt;105, 105-340, &gt;340): 25.8 31.4 42.8 </span>
<span class="co">#&gt;                         CV area (%): 135.2 </span>
<span class="co">#&gt;                        CV diam. (%): 82.6 </span>
<span class="co">#&gt;                       Good to spray: </span>
<span class="co">#&gt;                           Drift (%): 96.1</span></code></pre></div>
<p>Would it not be good to see some graphic results? This code below will give an histogram of the droplet diameters, locating VMD, D.1, D.9 and NMD. Furthermore, it will show the volume of droplets deposited on the paper against the diameter.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a1</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-5-1.png" width="480"></p>
</div>
<div id="making-a-report" class="section level2">
<h2 class="hasAnchor">
<a href="#making-a-report" class="anchor"></a>Making a report</h2>
<p>Now that you have done analyzing the paper, <em>hydropaper</em> can also help you to create a report with those results in a HTML file that can be printed out or shared with your partners. Running the code below will generate this file, namely <code>hyropaper_report.html</code>, in the R current working directory.</p>
<pre><code>makeReport(a1)</code></pre>
</div>
<div id="analyzing-multiple-images" class="section level2">
<h2 class="hasAnchor">
<a href="#analyzing-multiple-images" class="anchor"></a>Analyzing multiple images</h2>
<p><em>– And what about if I have a lot of images?</em> No problem! In this case, <em>hydropaper</em> can detect the paper in every one of them and the automatically make the analyses that we have seen above. Just put all your images in a folder, with no file other than the images, and point the path. Say for example that these two image files are in a folder.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'images'</span>, package <span class="op">=</span> <span class="st">'hydropaper'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span>
<span class="co">#&gt; [1] "field1.JPG" "field2.JPG"</span></code></pre></div>
<p>The code below will do the analyses in a loop. Note: it works just like <code><a href="../reference/analyzePaper.html">analyzePaper()</a></code>, with the same arguments, except the first one that must be the path of the folder containing the images.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/analyzeImages.html">analyzeImages</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a2</span><span class="op">)</span>
<span class="co">#&gt; $field1.JPG</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;               Water-Sensitive Paper Analysis</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;                             N drops: 1394 </span>
<span class="co">#&gt;                  Spray coverage (%): 18.1 </span>
<span class="co">#&gt;                 Density (drops/cm2): 71 </span>
<span class="co">#&gt;          Vol. applied (microliters): 356.96 </span>
<span class="co">#&gt;                    L/ha (predicted): 1806.49 </span>
<span class="co">#&gt;        Mean diameter (micronmeters): 397 </span>
<span class="co">#&gt;                   NMD (micrometers): 273 </span>
<span class="co">#&gt;                   VMD (micrometers): 639 </span>
<span class="co">#&gt;                   D.1 (micrometers): 299 </span>
<span class="co">#&gt;                   D.9 (micrometers): 965 </span>
<span class="co">#&gt;                  Relative amplitude: 1.04 </span>
<span class="co">#&gt;          Largest drop (micrometers): 1549 </span>
<span class="co">#&gt;         Smallest drop (micrometers): 100 </span>
<span class="co">#&gt; Diam. class % (&lt;105, 105-340, &gt;340): 25.8 31.4 42.8 </span>
<span class="co">#&gt;                         CV area (%): 135.2 </span>
<span class="co">#&gt;                        CV diam. (%): 82.6 </span>
<span class="co">#&gt;                       Good to spray: </span>
<span class="co">#&gt;                           Drift (%): 96.1 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $field2.JPG</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;               Water-Sensitive Paper Analysis</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;                             N drops: 43 </span>
<span class="co">#&gt;                  Spray coverage (%): 0.5 </span>
<span class="co">#&gt;                 Density (drops/cm2): 2 </span>
<span class="co">#&gt;          Vol. applied (microliters): 8.93 </span>
<span class="co">#&gt;                    L/ha (predicted): 45.18 </span>
<span class="co">#&gt;        Mean diameter (micronmeters): 373 </span>
<span class="co">#&gt;                   NMD (micrometers): 200 </span>
<span class="co">#&gt;                   VMD (micrometers): 591 </span>
<span class="co">#&gt;                   D.1 (micrometers): 254 </span>
<span class="co">#&gt;                   D.9 (micrometers): 1177 </span>
<span class="co">#&gt;                  Relative amplitude: 1.56 </span>
<span class="co">#&gt;          Largest drop (micrometers): 3331 </span>
<span class="co">#&gt;         Smallest drop (micrometers): 120 </span>
<span class="co">#&gt; Diam. class % (&lt;105, 105-340, &gt;340): 0 67.4 32.6 </span>
<span class="co">#&gt;                         CV area (%): 207.2 </span>
<span class="co">#&gt;                        CV diam. (%): 141.9 </span>
<span class="co">#&gt;                       Good to spray: </span>
<span class="co">#&gt;                           Drift (%): 96.1</span></code></pre></div>
<p>Good! This object <code>a2</code> is just a list (of length 2 in this case). You can <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> or <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> each element of that list by subsetting it with <code>[[</code>, and you can create a HTML report.</p>
<pre><code>makeReport(a2)</code></pre>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Gregoire Pau, Florian Fuchs, Oleg Sklyar, Michael Boutros, and Wolfgang Huber (2010): EBImage - an R package for image processing with applications to cellular phenotypes. Bioinformatics, 26(7), pp. 979-981.</p>
<p>Rautmann, D., M. Streloke, R. Winkler (2001) New basic drift values in the authorization procedure for plant protection products. In: R. Forster &amp; M. Streloke, Workshop on Risk Assessment and Risk Mitigation measures in the context of the authorization of plant protection products (WORMM) 27.-29. September 1999. Mitteilungen aus der Biologischen Bundesanstalt für Land- und Forstwirtschaft, Berlin-Dahlem, Heft 381. 2001. 133-141.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Anderson Rodrigo da Silva, Wilhan Valasco dos Santos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
